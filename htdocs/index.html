<!DOCTYPE html>
<html dir="ltr" lang="de">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>pixels-to-em</title>
	<meta name="description" content="Convert pixels to em" />
	<meta name="keywords" content="pixels, em, rem, css, javascript" />

	<!-- mobile scaling -->
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<!-- IE-Stuff -->
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	<meta name="MSSmartTagsPreventParsing" content="TRUE" />

	<!-- Website as app -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />

	<!-- Short Names -->
	<meta name="apple-mobile-web-app-title" content="Little Helpers" />
	<meta name="application-name" content="Little Helpers" />

	<!-- Icons -->
	<link rel="apple-touch-icon" href="apple-touch-icon-foto-228x228-precomposed.png" sizes="228x228" />
	<link rel="shortcut icon" href="favicon.ico" />

	<!-- using onpage-CSS for project-pages -->
	<style media="screen">
		body {
			font-family:-apple-system, 'Open Sans', 'Helvetica Neue', sans-serif;
		}
		input[type=number] {
 			-moz-appearance: textfield;
			 	 appearance: textfield;
		}
		input[type=number]::-webkit-inner-spin-button,
		input[type=number]::-webkit-outer-spin-button {
			-webkit-appearance: none;
			appearance: none;
			margin: 0;
		}
		.widget { font-size: .75rem; } /*-- 12px / 16px --*/
		.widget__title { font-size: 1rem; }
		.widget__row { margin-bottom: 4px; }
		.widget__input {
			border: 1px solid #ccc;
			border-radius: 4px;
			box-shadow: inset 1px 1px 3px rgba(0,0,0,.2);
			padding: 8px;
		}
		.widget__checkbox {
			border: 1px solid #ccc;
		}
		.widget__button {
			background-color: #007acc;
			border-radius: 4px;
			border-width: 0;
			color: #fdfdfd;
			padding: 8px;
		}
		.widget__result {
			font-family: 'Courier New', Courier, monospace;
			padding: 8px;
		}
	</style>

	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded',function(){
			// -- copy values
			// target to copy from is assigned to button via data-
			var copyTrigger = document.querySelector('.js-copy');
			copyTrigger.onclick = function() {
				var selection = document.querySelector('#' + copyTrigger.dataset.copySource);
				window.getSelection().selectAllChildren(selection);
				document.execCommand('copy');
				window.getSelection().removeAllRanges();
			}

			// -- START: Pixels to EM
			// set defaults
			var emPxUnitSwitch = document.querySelector('#em-px-unit-switch'),
				emPxOutput = document.querySelector('#em-px-result'),
				emPxInput = document.querySelectorAll('.js-input'),
				emPxInputTarget = document.querySelector('#em-px-input-target'),
				emPxInputParent = document.querySelector('#em-px-input-parent'),
				emPxResult = 0,
				unitSize = 'em',
				renderDefault = '&nbsp;';

			// calculation
			document.addEventListener('keyup', keyUpHandler, false);
			function keyUpHandler(){
				emPxResult =  Math.round(emPxInputTarget.value / emPxInputParent.value * 10000) / 10000;
				outputResult();
			};

			// switch units
			emPxUnitSwitch.onclick = function(){
				if(emPxUnitSwitch.checked === true) {
					unitSize = 'rem';
				} else {
					unitSize = 'em';
				}
				outputResult();
			};

			// output
			function outputResult() {
				if(emPxResult < 1) {
					emPxResult = String(emPxResult).replace(/^0./, '.');
				}

				if(isNaN(emPxResult) || emPxResult == 0 || emPxResult === Infinity) {
					emPxOutput.innerHTML = renderDefault;
				} else {
					emPxOutput.innerHTML = emPxResult + unitSize + '; /*-- ' + emPxInputTarget.value + 'px / ' + emPxInputParent.value + 'px --*/';
				}
			}
			// -- END: Pixels to EM
		});
	</script>
</head>

<body>
	<div class="widget" id="em-px-calculator">
		<h2 class="widget__title">EM to Pixels</h2>
		<div class="widget__row">
			<input type="number" min="0" value="" placeholder="desired output in pixels" id="em-px-input-target" class="widget__input js-input" />
			<label for="em-px-input-target">px</label>
		</div>
		<div class="widget__row">
			<input type="number" value="16" placeholder="set parent size to" id="em-px-input-parent" class="widget__input js-input" />
			<label for="em-px-input-parent">px</label>
		</div>
		<div id="em-px-result" class="widget__row widget__result">&nbsp;</div>
		<div class="widget__row">
			<input type="checkbox" id="em-px-unit-switch" class="widget__checkbox js-input" />
			<label for="em-px-unit-switch">rem</label>
			<button class="widget__button js-copy" data-copy-source="em-px-result">Copy</button>
		</div>
	</div>
</body>
</html>
